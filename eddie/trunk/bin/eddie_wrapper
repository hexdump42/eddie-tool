#!/bin/sh
#
## Eddie wrapper script to make sure it keeps running!
## 990302 Chris Miles <cmiles@connect.com.au>

while [ 1 ]; do
	cd /opt/eddie/bin
	./eddie.py >/var/run/eddie$$.out 2>&1
	retcode=$?
	echo "eddie_wrapper: eddie died at `date` return code: $retcode" >> /tmp/.eddie$$.out
	/usr/bin/mailx -s "Eddie output on `hostname` at `date`" cmiles@connect.com.au < /tmp/.eddie$$.out
	/usr/bin/sleep 30
	echo "eddie_wrapper: restarting Eddie at `date`."
done

rm -f /var/run/eddie$$.out
